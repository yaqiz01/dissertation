%%
%% This is file `paper.tex',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% samples.dtx  (with options: `sigconf')
%% 
%% IMPORTANT NOTICE:
%% 
%% For the copyright see the source file.
%% 
%% Any modified versions of this file must be renamed
%% with new filenames distinct from sample-sigconf.tex.
%% 
%% For distribution of the original source see the terms
%% for copying and modification in the file samples.dtx.
%% 
%% This generated file may be distributed as long as the
%% original source files, as listed above, are part of the
%% same distribution. (The sources need not necessarily be
%% in the same archive or directory.)
%%
%% The first command in your LaTeX source must be the \documentclass command.
\documentclass[sigplan,10pt,preprint]{acmart}

%% Includes for the paper
\input{includes/packages}
\input{includes/settings}

%%
%% Setup annotations and comments
\if\showcomments1
    \usepackage[textsize=tiny]{todonotes}
\else
    \usepackage[disable]{todonotes}
\fi

%%
%% end of the preamble, start of the body of the document source.
\begin{document}

%%
%% The "title" command has an optional parameter,
%% allowing the author to define a "short title" to be used in page headers.
\title{Supplemental Materials for \name{}: A Compiler for Scaling Reconfigurable Dataflow Accelerators\vspace{-10pt}}

%%
%% The "author" command and its associated commands are used to define
%% the authors and their affiliations.
%% Of note is the shared affiliation of the first two authors, and the
%% "authornote" and "authornotemark" commands
%% used to denote shared contribution to the research.
%\author{Ben Trovato}
%\authornote{Both authors contributed equally to this research.}
%\email{trovato@corporation.com}
%\orcid{1234-5678-9012}
%\author{G.K.M. Tobin}
%\authornotemark[1]
%\email{webmaster@marysville-ohio.com}
%\affiliation{%
%  \institution{Institute for Clarity in Documentation}
%  \streetaddress{P.O. Box 1212}
%  \city{Dublin}
%  \state{Ohio}
%  \postcode{43017-6221}
%}
%
%\author{Lars Th{\o}rv{\"a}ld}
%\affiliation{%
%  \institution{The Th{\o}rv{\"a}ld Group}
%  \streetaddress{1 Th{\o}rv{\"a}ld Circle}
%  \city{Hekla}
%  \country{Iceland}}
%\email{larst@affiliation.org}
%
%\author{Valerie B\'eranger}
%\affiliation{%
%  \institution{Inria Paris-Rocquencourt}
%  \city{Rocquencourt}
%  \country{France}
%}
%
%\author{Aparna Patel}
%\affiliation{%
% \institution{Rajiv Gandhi University}
% \streetaddress{Rono-Hills}
% \city{Doimukh}
% \state{Arunachal Pradesh}
% \country{India}}
%
%\author{Huifen Chan}
%\affiliation{%
%  \institution{Tsinghua University}
%  \streetaddress{30 Shuangqing Rd}
%  \city{Haidian Qu}
%  \state{Beijing Shi}
%  \country{China}}
%
%\author{Charles Palmer}
%\affiliation{%
%  \institution{Palmer Research Laboratories}
%  \streetaddress{8600 Datapoint Drive}
%  \city{San Antonio}
%  \state{Texas}
%  \postcode{78229}}
%\email{cpalmer@prl.com}
%
%\author{John Smith}
%\affiliation{\institution{The Th{\o}rv{\"a}ld Group}}
%\email{jsmith@affiliation.org}
%
%\author{Julius P. Kumquat}
%\affiliation{\institution{The Kumquat Consortium}}
%\email{jpkumquat@consortium.net}

\author{Paper \#169}
\affiliation{\institution{\pageref{lastpage} Pages Body, \pageref{totalpage} Pages Total}}
%\email{jsmith@affiliation.org}

%%
%% By default, the full list of authors will be used in the page
%% headers. Often, this list is too long, and will overlap
%% other information printed in the page headers. This command allows
%% the author to define a more concise list
%% of authors' names for this purpose.
%\renewcommand{\shortauthors}{Trovato and Tobin, et al.}

%%
%% Setup todo notes for comments and annotations

%%
%% The abstract is a short summary of the work to be presented in the
%% article.

%%%
%%% The code below is generated by the tool at http://dl.acm.org/ccs.cfm.
%%% Please copy and paste the code instead of the example below.
%%%
%\begin{CCSXML}
%<ccs2012>
% <concept>
%  <concept_id>10010520.10010553.10010562</concept_id>
%  <concept_desc>Computer systems organization~Embedded systems</concept_desc>
%  <concept_significance>500</concept_significance>
% </concept>
% <concept>
%  <concept_id>10010520.10010575.10010755</concept_id>
%  <concept_desc>Computer systems organization~Redundancy</concept_desc>
%  <concept_significance>300</concept_significance>
% </concept>
% <concept>
%  <concept_id>10010520.10010553.10010554</concept_id>
%  <concept_desc>Computer systems organization~Robotics</concept_desc>
%  <concept_significance>100</concept_significance>
% </concept>
% <concept>
%  <concept_id>10003033.10003083.10003095</concept_id>
%  <concept_desc>Networks~Network reliability</concept_desc>
%  <concept_significance>100</concept_significance>
% </concept>
%</ccs2012>
%\end{CCSXML}
%
%\ccsdesc[500]{Computer systems organization~Embedded systems}
%\ccsdesc[300]{Computer systems organization~Redundancy}
%\ccsdesc{Computer systems organization~Robotics}
%\ccsdesc[100]{Networks~Network reliability}

%%
%% Keywords. The author(s) should pick words that accurately describe
%% the work being presented. Separate the keywords with commas.
%\keywords{datasets, neural networks, gaze detection, text tagging}
%\keywords{Streaming Data-flow Accelerator, Reconfigurable Spatial Accelerator, Spatial Accelerator Mapping}

%%% A "teaser" image appears between the author and affiliation
%%% information and the body of the document, and typically spans the
%%% page.
%\begin{teaserfigure}
%  \includegraphics[width=\textwidth]{sampleteaser}
%  \caption{Seattle Mariners at Spring Training, 2010.}
%  \Description{Enjoying the baseball game from the third-base
%  seats. Ichiro Suzuki preparing to bat.}
%  \label{fig:teaser}
%\end{teaserfigure}

%%
%% This command processes the author and affiliation and title
%% information and builds the first part of the formatted document.
\maketitle

%% Removes running page headers
\if\removepageheaders1
    \pagestyle{plain}
\fi


\label{lastpage}

\section{Solver Supplement}
\subsection{Partitioning}
\subsubsection{Input Arity Constraint}
 $\Sigma_{n_i \in \mathcal{N}} \overbrace{\max\{\underbrace{\projb{\Sigma_{n_j \in \dest(n_i)} B_{j, :}}}_{\textbf{Output locations of node }i} - B_{i, :}, 0\}}^{\textbf{Nonlocal output partitions of node }} \le c_i \times \vec{1}$

\subsubsection{Output Arity Constraint}
\begin{align*}
	\forall p \in [0, P):\\
	\Sigma_{n_s \in \mathcal{N}} \andf(B_{s, p},\underbrace{\projb{\max\{(\Sigma_{n_d \in \dest(n_s)} B_{d, p}) - K \times B_{s, p}, 0\}}}_{\text{Output locations for node}}) \le c_o
\end{align*}

\subsubsection{Delay Consistency}
\begin{align*}
	\forall n_i \in \mathbf{N}&:\\
	&d_n(i) \ge \underbrace{\max_j(B_{i, j} \times - maxdelay + maxdelay + d_p(j))}_{\text{Convex forumlation for partition delay}}\\
	&d_n(i) \le \underbrace{\min_j(B_{i, j} \times maxdelay - maxdelay + d_p(j))}_{\text{Concave forumlation for partition delay}}
\end{align*}

\subsection{Merging}
\subsubsection{Reducible Constraints}
$\forall j \in [0, P).\ \forall \underbrace{(c(\cdot), c_v, r(\cdot))}_{\text{cost function, constraint value, reduction function}} \in \mathcal{C}:\ \underbrace{r([c(n_i) \times B_{i, j}]_{n_i \in \mathcal{N}})}_{\text{Total Cost (max / sum / other)}} \le c_v$

\subsection{Utilities}
\subsubsection{$\projb{\cdot}$}
One common construct that the formulations use is a pseudo-projection to boolean; that is, function $\projb{v} \coloneq \{ 1\ \text{if}\ v \ge 0 \ \text{otherwise either 0 or 1}\}$, where $v$ is convex. Note that the additional constraint to exclude the $b = 1, v = 1$ case is unnecessary for the purposes of the solver.

\subsubsection{$\andf(\cdot, \cdot)$}
Consider boolean variables $a, b \in \{0, 1\}$. Then $\andf(a, b) \coloneq a \land b \equiv \max(a + b - 1, 0)$.

\subsubsection{$1[p_i \ne p_j]$}
This expression can be expanded to $\Sigma_k \max\{B_{i, k} - B_{j, k}, 0\}$.
Note that the row $B_{i, :}$ is the standard basis vector $e_{p_i}$, and the row $B_{j, :}$ is the standard basis vector $e_{p_j}$. If $i = j$ then the result is 0.
Otherwise, $\max\{B_{i, p_i} - B_{j, p_i}, 0\} = 1$, and $\max\{B_{i, p_j} - B_{j, p_j}, 0\} = \max\{-1, 0\} = 0$.

\appendix
%%
%% The acknowledgments section is defined using the "acks" environment
%% (and NOT an unnumbered section). This ensures the proper
%% identification of the section in the article metadata, and the
%% consistent spelling of the heading.
%\begin{acks}
%To Robert, for the bagels and explaining CMYK and color spaces.
%\end{acks}

%%
%% The next two lines define the bibliography style to be used, and
%% the bibliography file.
%\bibliographystyle{ACM-Reference-Format}
%\bibliography{paper}

\label{totalpage}

%%
%% If your work has an appendix, this is the place to put it.
%\appendix

%\section{Research Methods}

\end{document}
\endinput
%%
%% End of file `paper.tex'.
